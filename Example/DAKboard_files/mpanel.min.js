!function(t,e,s,n,a){"use strict";t.mPanel=function(){var t,n={};n.settings={},n.rssData=null,n.rssItemsTotal=0,n.rssCurrent=0;var a=new ProgressBar.Line("#progress",{strokeWidth:3,color:"#888888"});return n.updateTime=function(){var t=moment().tz(this.settings.timezone);if("analog"==this.settings.clockType){var s=6*t.seconds(),a=6*t.minutes()+s/60,o=t.hours()%12/12*360+90+a/12;e("#hour").css("transform","rotate("+o+"deg)"),e("#minute").css("transform","rotate("+a+"deg)"),e("#second").css("transform","rotate("+s+"deg)")}else e(".clock .time").html(t.format((12==this.settings.timeFormat?"h":"HH")+":mm")+(1==this.settings.showSeconds||""==this.settings.showSeconds?'<span class="sec">'+t.format("ss")+"</span>":"")+(1==this.settings.showAmpm?'<span class="time-ampm">'+t.format("A")+"</span>":""));"D MMMM"==this.settings.dateFormat?e(".date").html('<div class="day-of-week">'+t.format("dddd,")+'</div><div class="month">'+t.format("D MMMM")+"</div>"):"dddd D. MMMM"==this.settings.dateFormat?e(".date").html('<div class="day-of-week">'+t.format("dddd D. MMMM")+"</div>"):e(".date").html('<div class="day-of-week">'+t.format("dddd,")+'</div><div class="month">'+t.format("MMMM D")+"</div>"),setTimeout(function(){n.updateTime()},1e3)},n.updateEvents=function(){e("#calendar").load(this.settings.route+"/events",function(){e(s).trigger("resize"),e("#events-loading").hide(),e("#calendar").fadeIn()}),setTimeout(function(){n.updateEvents()},this.settings.isPremium?9e5:36e5)},n.updateTodo=function(){e("#todo").load(this.settings.route+"/todo",function(){e(s).trigger("resize"),e("#todo-loading").hide(),e("#todo").fadeIn()}),setTimeout(function(){n.updateTodo()},9e5)},n.updateWeather=function(){e("#weather").load(this.settings.route+"/weather",function(){e("#weather-loading").hide(),e("#weather").fadeIn(),e(s).trigger("resize")}),setTimeout(function(){n.updateWeather()},18e5)},n.updateWeatherForecast=function(){e.getJSON(this.settings.route+"/weatherForecast",function(t){for(var s=0;s<t.forecast.length;s++)e(".weather-forecast-"+t.forecast[s].day).html('<span class="weather-forecast-icon wi '+t.forecast[s].icon_class+'"></span><span class="weather-forecast-item-high">'+t.forecast[s].temp_high+'</span><span class="weather-forecast-item-low">'+t.forecast[s].temp_low+"</span>")}),setTimeout(function(){n.updateWeatherForecast()},36e5)},n.updateRss=function(){e.getJSON(this.settings.route+"/rss",function(t){n.rssData=t,n.rssItemsTotal=t.length,n.rssCurrent=0,clearTimeout(n.rssRotateTimer),n.rotateRssTitles()}),setTimeout(function(){n.updateRss()},18e5)},n.rotateRssTitles=function(){var t=this.rssCurrent,s=this.rssData;e(".rss-title").fadeOut(200,function(){e(this).html(s[t].title).fadeIn(200)}),e(".rss-description").length>0&&e(".rss-description").fadeOut(200,function(){e(this).html(s[t].description).fadeIn(200)}),this.rssCurrent++,this.rssCurrent>=this.rssItemsTotal&&(this.rssCurrent=0),this.rssRotateTimer=setTimeout(function(){n.rotateRssTitles()},25e3)},n.updatePhoto=function(){if(e("#background-underlay-1").is(":visible"))var s=e("#background-underlay-1"),o=e("#background-underlay-2");else o=e("#background-underlay-1"),s=e("#background-underlay-2");function i(t){e("<img/>").attr("src",t.url).on("load",function(){if(void 0!==t.url){e(this).remove(),o.css({background:"#000 url("+t.url+") center center",backgroundSize:"fill"==n.settings.photoLayout?"cover":"contain",backgroundRepeat:"no-repeat"});var i='<span class="dark">Photo</span> ';t.owner&&(i=i+' <span class="dark">by</span> <a href="'+t.profile_url+'" target="_blank">'+t.owner+"</a>"),e("#img-owner").html(i+' <span class="dark">'+t.verb+"</span> "+t.taken),e("#img-title").html('<span class="fas fa-camera"></span>&nbsp;&nbsp;'+t.title),o.show(),1==n.settings.photoTransition?s.fadeOut(1e3,function(){s.css({background:"none",zIndex:9}),o.css({zIndex:10})}):(s.hide().css({background:"none",zIndex:0}),o.css({zIndex:1})),a.set(0),a.animate(1,{duration:n.settings.photoChange,step:function(t,e,s){}},function(){})}})}void 0!==t&&t.length>0?(i(t[0]),t.shift()):e.getJSON(this.settings.route+"/photos",function(e){Array.isArray(e)?(t=e,i(e[0]),t.shift()):i(e)}),setTimeout(function(){n.updatePhoto()},n.settings.photoChange)},n.init=function(t){return console.log("mPanel:publicApi.init"),n.settings=e.extend({},n.defaults,t),n},n}}(this,jQuery,window,document);